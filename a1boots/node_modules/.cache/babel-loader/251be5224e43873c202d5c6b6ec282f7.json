{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { useContext, useMemo } from 'react';\nimport { useList } from '../../controller';\nimport { ChoicesContext } from './ChoicesContext';\nexport var useChoicesContext = function useChoicesContext(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var context = useContext(ChoicesContext);\n\n  var _a = useList({\n    data: options.choices,\n    // When not in a ChoicesContext, paginating does not make sense (e.g. AutocompleteInput).\n    perPage: Infinity\n  }),\n      data = _a.data,\n      list = __rest(_a, [\"data\"]);\n\n  var result = useMemo(function () {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w; // Props take precedence over context.\n\n\n    if (options.choices || !context) {\n      return {\n        allChoices: data,\n        availableChoices: (_a = options.availableChoices) !== null && _a !== void 0 ? _a : data,\n        selectedChoices: (_b = options.selectedChoices) !== null && _b !== void 0 ? _b : data,\n        displayedFilters: (_c = options.selectedChoices) !== null && _c !== void 0 ? _c : list.displayedFilters,\n        error: options.error,\n        filter: (_d = options.filter) !== null && _d !== void 0 ? _d : list.filter,\n        filterValues: (_e = options.filterValues) !== null && _e !== void 0 ? _e : list.filterValues,\n        hasNextPage: (_f = options.hasNextPage) !== null && _f !== void 0 ? _f : list.hasNextPage,\n        hasPreviousPage: (_g = options.hasPreviousPage) !== null && _g !== void 0 ? _g : list.hasPreviousPage,\n        hideFilter: (_h = options.hideFilter) !== null && _h !== void 0 ? _h : list.hideFilter,\n        isFetching: (_j = options.isFetching) !== null && _j !== void 0 ? _j : list.isFetching,\n        isLoading: (_k = options.isLoading) !== null && _k !== void 0 ? _k : list.isLoading,\n        page: (_l = options.page) !== null && _l !== void 0 ? _l : list.page,\n        perPage: (_m = options.perPage) !== null && _m !== void 0 ? _m : list.perPage,\n        refetch: (_o = options.refetch) !== null && _o !== void 0 ? _o : list.refetch,\n        resource: (_p = options.resource) !== null && _p !== void 0 ? _p : list.resource,\n        setFilters: (_q = options.setFilters) !== null && _q !== void 0 ? _q : list.setFilters,\n        setPage: (_r = options.setPage) !== null && _r !== void 0 ? _r : list.setPage,\n        setPerPage: (_s = options.setPerPage) !== null && _s !== void 0 ? _s : list.setPerPage,\n        setSort: (_t = options.setSort) !== null && _t !== void 0 ? _t : list.setSort,\n        showFilter: (_u = options.showFilter) !== null && _u !== void 0 ? _u : list.showFilter,\n        sort: (_v = options.sort) !== null && _v !== void 0 ? _v : list.sort,\n        source: options.source,\n        total: (_w = options.total) !== null && _w !== void 0 ? _w : list.total,\n        isFromReference: false\n      };\n    }\n\n    return context;\n  }, [context, data, list, options]);\n  return result;\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;AAAA,SAASA,UAAT,EAAqBC,OAArB,QAAoC,OAApC;AAEA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,cAAT,QAAoD,kBAApD;AAEA,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAC7BC,OAD6B,EAC2C;EAAxE;IAAAA;EAAwE;;EAExE,IAAMC,OAAO,GAAGN,UAAU,CAACG,cAAD,CAA1B;;EAGA,IAAMI,KAAoBL,OAAO,CAAc;IAC3CM,IAAI,EAAEH,OAAO,CAACI,OAD6B;IAE3C;IACAC,OAAO,EAAEC;EAHkC,CAAd,CAAjC;EAAA,IAAQH,IAAI,UAAZ;EAAA,IAAiBI,IAAI,cAAf,QAAe,CAArB;;EAKA,IAAMC,MAAM,GAAGZ,OAAO,CAAC;2FAAA,CACnB;;;IACA,IAAII,OAAO,CAACI,OAAR,IAAmB,CAACH,OAAxB,EAAiC;MAC7B,OAAO;QACHQ,UAAU,EAAEN,IADT;QAEHO,gBAAgB,EAAE,aAAO,CAACA,gBAAR,MAAwB,IAAxB,IAAwBR,aAAxB,GAAwBA,EAAxB,GAA4BC,IAF3C;QAGHQ,eAAe,EAAE,aAAO,CAACA,eAAR,MAAuB,IAAvB,IAAuBC,aAAvB,GAAuBA,EAAvB,GAA2BT,IAHzC;QAIHU,gBAAgB,EACZ,aAAO,CAACF,eAAR,MAAuB,IAAvB,IAAuBG,aAAvB,GAAuBA,EAAvB,GAA2BP,IAAI,CAACM,gBALjC;QAMHE,KAAK,EAAEf,OAAO,CAACe,KANZ;QAOHC,MAAM,EAAE,aAAO,CAACA,MAAR,MAAc,IAAd,IAAcC,aAAd,GAAcA,EAAd,GAAkBV,IAAI,CAACS,MAP5B;QAQHE,YAAY,EAAE,aAAO,CAACA,YAAR,MAAoB,IAApB,IAAoBC,aAApB,GAAoBA,EAApB,GAAwBZ,IAAI,CAACW,YARxC;QASHE,WAAW,EAAE,aAAO,CAACA,WAAR,MAAmB,IAAnB,IAAmBC,aAAnB,GAAmBA,EAAnB,GAAuBd,IAAI,CAACa,WATtC;QAUHE,eAAe,EACX,aAAO,CAACA,eAAR,MAAuB,IAAvB,IAAuBC,aAAvB,GAAuBA,EAAvB,GAA2BhB,IAAI,CAACe,eAXjC;QAYHE,UAAU,EAAE,aAAO,CAACA,UAAR,MAAkB,IAAlB,IAAkBC,aAAlB,GAAkBA,EAAlB,GAAsBlB,IAAI,CAACiB,UAZpC;QAaHE,UAAU,EAAE,aAAO,CAACA,UAAR,MAAkB,IAAlB,IAAkBC,aAAlB,GAAkBA,EAAlB,GAAsBpB,IAAI,CAACmB,UAbpC;QAcHE,SAAS,EAAE,aAAO,CAACA,SAAR,MAAiB,IAAjB,IAAiBC,aAAjB,GAAiBA,EAAjB,GAAqBtB,IAAI,CAACqB,SAdlC;QAeHE,IAAI,EAAE,aAAO,CAACA,IAAR,MAAY,IAAZ,IAAYC,aAAZ,GAAYA,EAAZ,GAAgBxB,IAAI,CAACuB,IAfxB;QAgBHzB,OAAO,EAAE,aAAO,CAACA,OAAR,MAAe,IAAf,IAAe2B,aAAf,GAAeA,EAAf,GAAmBzB,IAAI,CAACF,OAhB9B;QAiBH4B,OAAO,EAAE,aAAO,CAACA,OAAR,MAAe,IAAf,IAAeC,aAAf,GAAeA,EAAf,GAAmB3B,IAAI,CAAC0B,OAjB9B;QAkBHE,QAAQ,EAAE,aAAO,CAACA,QAAR,MAAgB,IAAhB,IAAgBC,aAAhB,GAAgBA,EAAhB,GAAoB7B,IAAI,CAAC4B,QAlBhC;QAmBHE,UAAU,EAAE,aAAO,CAACA,UAAR,MAAkB,IAAlB,IAAkBC,aAAlB,GAAkBA,EAAlB,GAAsB/B,IAAI,CAAC8B,UAnBpC;QAoBHE,OAAO,EAAE,aAAO,CAACA,OAAR,MAAe,IAAf,IAAeC,aAAf,GAAeA,EAAf,GAAmBjC,IAAI,CAACgC,OApB9B;QAqBHE,UAAU,EAAE,aAAO,CAACA,UAAR,MAAkB,IAAlB,IAAkBC,aAAlB,GAAkBA,EAAlB,GAAsBnC,IAAI,CAACkC,UArBpC;QAsBHE,OAAO,EAAE,aAAO,CAACA,OAAR,MAAe,IAAf,IAAeC,aAAf,GAAeA,EAAf,GAAmBrC,IAAI,CAACoC,OAtB9B;QAuBHE,UAAU,EAAE,aAAO,CAACA,UAAR,MAAkB,IAAlB,IAAkBC,aAAlB,GAAkBA,EAAlB,GAAsBvC,IAAI,CAACsC,UAvBpC;QAwBHE,IAAI,EAAE,aAAO,CAACA,IAAR,MAAY,IAAZ,IAAYC,aAAZ,GAAYA,EAAZ,GAAgBzC,IAAI,CAACwC,IAxBxB;QAyBHE,MAAM,EAAEjD,OAAO,CAACiD,MAzBb;QA0BHC,KAAK,EAAE,aAAO,CAACA,KAAR,MAAa,IAAb,IAAaC,aAAb,GAAaA,EAAb,GAAiB5C,IAAI,CAAC2C,KA1B1B;QA2BHE,eAAe,EAAE;MA3Bd,CAAP;IA6BH;;IACD,OAAOnD,OAAP;EACH,CAlCqB,EAkCnB,CAACA,OAAD,EAAUE,IAAV,EAAgBI,IAAhB,EAAsBP,OAAtB,CAlCmB,CAAtB;EAoCA,OAAOQ,MAAP;AACH,CAhDM","names":["useContext","useMemo","useList","ChoicesContext","useChoicesContext","options","context","_a","data","choices","perPage","Infinity","list","result","allChoices","availableChoices","selectedChoices","_b","displayedFilters","_c","error","filter","_d","filterValues","_e","hasNextPage","_f","hasPreviousPage","_g","hideFilter","_h","isFetching","_j","isLoading","_k","page","_l","_m","refetch","_o","resource","_p","setFilters","_q","setPage","_r","setPerPage","_s","setSort","_t","showFilter","_u","sort","_v","source","total","_w","isFromReference"],"sources":["/var/www/a1boots/node_modules/ra-core/src/form/choices/useChoicesContext.ts"],"sourcesContent":["import { useContext, useMemo } from 'react';\nimport { RaRecord } from '../../types';\nimport { useList } from '../../controller';\nimport { ChoicesContext, ChoicesContextValue } from './ChoicesContext';\n\nexport const useChoicesContext = <ChoicesType extends RaRecord = RaRecord>(\n    options: Partial<ChoicesContextValue> & { choices?: ChoicesType[] } = {}\n): ChoicesContextValue => {\n    const context = useContext(ChoicesContext) as ChoicesContextValue<\n        ChoicesType\n    >;\n    const { data, ...list } = useList<ChoicesType>({\n        data: options.choices,\n        // When not in a ChoicesContext, paginating does not make sense (e.g. AutocompleteInput).\n        perPage: Infinity,\n    });\n    const result = useMemo(() => {\n        // Props take precedence over context.\n        if (options.choices || !context) {\n            return {\n                allChoices: data,\n                availableChoices: options.availableChoices ?? data,\n                selectedChoices: options.selectedChoices ?? data,\n                displayedFilters:\n                    options.selectedChoices ?? list.displayedFilters,\n                error: options.error,\n                filter: options.filter ?? list.filter,\n                filterValues: options.filterValues ?? list.filterValues,\n                hasNextPage: options.hasNextPage ?? list.hasNextPage,\n                hasPreviousPage:\n                    options.hasPreviousPage ?? list.hasPreviousPage,\n                hideFilter: options.hideFilter ?? list.hideFilter,\n                isFetching: options.isFetching ?? list.isFetching,\n                isLoading: options.isLoading ?? list.isLoading,\n                page: options.page ?? list.page,\n                perPage: options.perPage ?? list.perPage,\n                refetch: options.refetch ?? list.refetch,\n                resource: options.resource ?? list.resource,\n                setFilters: options.setFilters ?? list.setFilters,\n                setPage: options.setPage ?? list.setPage,\n                setPerPage: options.setPerPage ?? list.setPerPage,\n                setSort: options.setSort ?? list.setSort,\n                showFilter: options.showFilter ?? list.showFilter,\n                sort: options.sort ?? list.sort,\n                source: options.source,\n                total: options.total ?? list.total,\n                isFromReference: false,\n            };\n        }\n        return context;\n    }, [context, data, list, options]);\n\n    return result;\n};\n"]},"metadata":{},"sourceType":"module"}